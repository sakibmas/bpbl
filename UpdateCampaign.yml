---
- hosts: bpbl
  become: yes
  tasks:
   - name: Install git package
     package:
      name: git
      state: present
     tags:
      - update

   - name: Install python-pymysql package
     package:
      name:
       - python3-libselinux
      state: present
     tags:
      - backup

   - name: Update git repository
     git:
      repo: "{{ CampaignRepoSsh }}"
      dest: "{{ CampaignPath }}/{{ TargetCompaignName }}"
      accept_hostkey: yes
      force: yes
      version: "{{BranchName}}"
     notify:
      - Restart web daemon
     tags:
      - update

   - name: Set SELinux file context mapping definitions
     command: restorecon -Rv "{{ CampaignPath }}"

  handlers:
   - name: Restart web daemon
     service:
      name: httpd
      state: restarted
...
